<html>
<head>

<script src="https://d3js.org/d3.v5.js"></script>

<script src="https://d3js.org/d3-array.v1.min.js"></script>
<script src="https://d3js.org/d3-collection.v1.min.js"></script>
<script src="https://d3js.org/d3-color.v1.min.js"></script>
<script src="https://d3js.org/d3-format.v1.min.js"></script>
<script src="https://d3js.org/d3-interpolate.v1.min.js"></script>
<script src="https://d3js.org/d3-time.v1.min.js"></script>
<script src="https://d3js.org/d3-time-format.v2.min.js"></script>
<script src="https://d3js.org/d3-scale.v2.min.js"></script>
</script>

<style>
    .container {
        margin: 30px auto;
        width: 600px;
        height: 300px;
        border: 1px solid #000;
    }
</style>


</head>



<body>
<h1>政府2018年的開支</h1>



<h2>2018-19年度政府總支出為4065億元</h2>
<style>
        svg{
            width:800px;
            height:1000px;
        }
        </style>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script>
var width = 400;
var height = 400;

var dataset = [['社會福利及基礎建設', 72.5], ['環境及視頻', 5.3], ['教育', 16.3], ['經濟', 3.5], ['其他', 1.0], ['衛生', 1.4]];

var pie = d3.pie()
            .sort(null)
            .value(function(d){
              return d[1];
            });
var piedata = pie(dataset);

var outerRadius = width / 4;
var innerRadius = 0;

var arc = d3.arc()
            .outerRadius(outerRadius)
            .innerRadius(innerRadius);

var colors = d3.schemeCategory10;

var svg = d3.select('body')
			.append('svg')
			.attr('width', width)
			.attr('height', height);

var arcs = svg.selectAll('g')
              .data(piedata)
              .enter()
              .append('g')
              .attr('transform', 'translate(' + width / 2 + ',' + height / 2 + ')');

arcs.append('path')
    .attr('fill', function(d, i){
      return colors[i];
    })
    .attr('d', function(d){
      return arc(d);
    });

arcs.append('text')
		.attr('transform', function(d, i){
			var x = arc.centroid(d)[0] * 2.8;
			var y = arc.centroid(d)[1] * 2.8;
			if(i === 4) {
				return 'translate(' + (x * 1.2) + ', ' + (y * 1.2) + ')';
			} else if(i === 3) {
			  return 'translate(' + (x - 40) + ', ' + y + ')';
			} else if(i === 5) {
				return 'translate(' + (x + 40) + ', ' + y + ')';
			}
			return 'translate(' + x + ', ' + y + ')';
		})
		.attr('text-anchor', 'middle')
		.text(function(d){
			var percent = Number(d.value) / d3.sum(dataset, function(d){
				return d[1];
			}) * 100;
			return d.data[0] + ' ' + percent.toFixed(1) + '%';
		})

arcs.append('line')
		.attr('stroke', 'black')
		.attr('x1', function(d){ return arc.centroid(d)[0] * 2; })
		.attr('y1', function(d){ return arc.centroid(d)[1] * 2; })
		.attr('x2', function(d, i){
			if(i === 4) {
				return arc.centroid(d)[0] * 3.2;
			}
			return arc.centroid(d)[0] * 2.5;
		})
		.attr('y2', function(d, i){
			if(i === 4) {
				return arc.centroid(d)[1] * 3.2;
			}
			return arc.centroid(d)[1] * 2.5;
		});
        
    </script>
  <h6>圖表數值單位均為“億元”</h6>
<h3>從圖中我們可以看出政府用於社會福利及基礎建設的支出最大，其次是用於教育。</h3>

<h2>2010—2018政府支出中社會福利和基礎建設占比</h2>

    
<div>
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
<polyline points="100,170 200,140 300,110 400,90 500,0 "
style="fill:none;stroke:black;stroke-width:3" />
<text x="100" y="160" fill="red">72.5</text>
<text x="200" y="130" fill="yello"> 72.4</text>
<text x="300" y="100" fill="blue">70.1</text>
<text x="390" y="80" fill="green">66.7</text>
<text x="470" y="10" fill="purple">63.2</text>
<text x="100" y="190" fill="black">2014</text>
<text x="200" y="190" fill="black">2015</text>
<text x="300" y="190" fill="black">2016</text>
<text x="400" y="190" fill="black">2017</text>
<text x="500" y="190" fill="black">2018</text>

</svg>

<h3>從圖表中可以看出，2010—2018政府支出中社會福利和基礎建設占比在逐步上升，說明了政府對民生的重視程度</h3>
	</div>

        
<!-- <h1>Demo of Bubble chart in D3</h1> -->
<!-- <svg>  -->
    <!-- <text =10 y=10>Bubble</text> -->
    
<!-- </svg> -->




</body>

   
   
   
   
   
   
    </html>
